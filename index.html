<script>
  console.log("UA:", navigator.userAgent);
</script>

<script>
(function () {
  var ua = navigator.userAgent;

  // Safari desktop (Mac) → contient "Safari" mais PAS "Chrome", "Chromium", "CriOS", "Edg", "OPR", "Brave"
  var isMacSafari = /Macintosh/.test(ua) && /Safari\//.test(ua) &&
                    !/(Chrome|Chromium|CriOS|Edg|OPR|Brave|Firefox)/i.test(ua);

  // iOS (tous navigateurs) → obligé d'utiliser WebKit, donc même problème
  var isIOSWebKit = /(iPhone|iPad|iPod)/i.test(ua);

  var png  = document.getElementById('png');
  var webm = document.getElementById('webm');

  if (isIOSWebKit || isMacSafari) {
    console.log("Safari détecté → PNG");
    png.style.display = 'block';
  } else {
    console.log("Autre navigateur → WebM");
    webm.style.display = 'block';
    webm.play().catch(()=>{});
  }
})();
</script>
